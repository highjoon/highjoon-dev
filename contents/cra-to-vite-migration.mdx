---
title: CRAì—ì„œ Viteë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ê¸°
date: 2023-08-31
description: CRAì—ì„œ Viteë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ê¸°
---

## Table of Contents

## ê°œìš”

`CRA`ë¡œ ì´ë£¨ì–´ì§„ ì‚¬ë‚´ í”„ë¡œì íŠ¸ë¥¼ `Vite`ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í–ˆë‹¤.
ê·¸ ê³¼ì •ê³¼ ê²°ê³¼, íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì„ ê³µìœ í•˜ê³ ì í•œë‹¤.

## ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ìœ 

ì‚¬ë‚´ í”„ë¡œì íŠ¸ëŠ” `Webpack 4`ë¡œ ì´ë£¨ì–´ì§„ `react-scripts v4`ì™€ `Craco` ì¡°í•©ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤. ì´ë¥¼ `Vite`ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ê¸°ë¡œ ê²°ì •í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

### 1. CRAì˜ ëŠë¦° ì†ë„

`CRA`ì™€ `react-scripts`ëŠ” ê°•ë ¥í•œ ë„êµ¬ì„ì—ëŠ” í‹€ë¦¼ ì—†ë‹¤. í•˜ì§€ë§Œ ê·¸ ë‚´ë¶€ì˜ `Webpack`ì€ ë¬´ê²ê³  ëŠë¦° í¸ì— ì†í•œë‹¤.

ì‚¬ë‚´ í”„ë¡œì íŠ¸ì˜ ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ë™ê³¼ HMR ì‹œê°„ì€ ìˆ˜ ì´ˆ ì´ìƒ ì†Œìš”ë˜ì—ˆë‹¤.

ë°°í¬ ì‹œê°„ì€ **ìµœëŒ€ 15ë¶„**ì´ ì°íˆê³  ìˆì—ˆë‹¤. ê·¸ ì¤‘ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œê°€ ìµœëŒ€ 2ë¶„ ì”© ê±¸ë¦¬ê³  ìˆì—ˆë‹¤.

ê°œë°œ í™˜ê²½ êµ¬ë™ ì‹œê°„ì€ 10ì´ˆ ì´ìƒ ì”© ê±¸ë¦¬ê³  ìˆì—ˆìœ¼ë©° `HMR` ì‹œê°„ ì—­ì‹œ ìˆ˜ ì´ˆ ì´ìƒ ì†Œìš”ë˜ê³  ìˆì—ˆë‹¤.

ì „ë°˜ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§ˆ ìˆ˜ë¡ ëŠë ¤ì§€ê³  ìˆìŒì´ í‹€ë¦¼ ì—†ì—ˆë‹¤.

#### Viteì˜ ë¹ ë¥¸ ì†ë„

ëŒ€ì‹ ì— `Vite`ê°€ `Native ES Modules` + `Rollup` êµ¬ì¡°ë¥¼ ì±„íƒí•˜ì—¬ ì†ë„ê°€ ë§¤ìš° ë¹ ë¥´ë‹¤ëŠ” ì ì— ì£¼ëª©í–ˆë‹¤. `Vite`ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“ˆì„ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ì™€ ì†ŒìŠ¤ ì½”ë“œë¡œ ë‚˜ëˆ ì„œ êµ¬ë™í•œë‹¤.

ë¨¼ì € ì˜ì¡´ì„± íŒ¨í‚¤ì§€ëŠ” `ES Build`ë¡œ ì‚¬ì „ì— íŠ¸ëœìŠ¤íŒŒì¼ë§í•œë‹¤. `ES Build`ëŠ” `Go` ì–¸ì–´ë¡œ ì‘ì„±ë˜ì–´ `Webpack` ëŒ€ë¹„ ìµœëŒ€ 100ë°° ë” ë¹ ë¥¸ ì†ë„ë¥¼ ì œê³µí•œë‹¤.

ì†ŒìŠ¤ ì½”ë“œëŠ” ë„¤ì´í‹°ë¸Œ `ES Modules`ë¥¼ í™œìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ `import` í•  ìˆ˜ ìˆë‹¤. ì¦‰, ë¸Œë¼ìš°ì €ê°€ ë²ˆë“¤ëŸ¬ì˜ ì‘ì—…ì„ ì¼ë¶€ ìˆ˜í–‰í•œë‹¤. `Vite`ëŠ” ë¸Œë¼ìš°ì €ê°€ ìš”ì²­í•˜ëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ì¦‰ì‹œ ë³€í™˜í•˜ì—¬ ì œê³µí•œë‹¤.

![bundle-based-dev-server](/images/contents/cra-to-vite-migration/img-bundle-based-dev-server.png)

![native-esm-based-dev-server](/images/contents/cra-to-vite-migration/img-native-esm-based-dev-server.png)

### 2. ë²ˆë“¤ëŸ¬ì˜ ì˜µì…˜ í™œìš©ì´ ë²ˆê±°ë¡­ë‹¤

`Webpack`ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ `eject`ë¥¼ í•˜ê±°ë‚˜ `Craco` ë“± ì¨ë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬ê²Œ ì˜ì¡´í•´ì•¼ í•œë‹¤. ì¦‰, ê²½ìš°ì— ë”°ë¼ ì»¤ìŠ¤í…€ êµ¬ì„±ì´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆì—ˆë‹¤.

ì‹¤ì œë¡œ `CRA` ê¸°ë°˜ ì‚¬ë‚´ í”„ë¡œì íŠ¸ì—ì„œ `React.lazy()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ í•˜ëŠ”ë°ë„ [ì—ëŸ¬ë¥¼ ë¿œì–´ë‚´ì–´](https://stackoverflow.com/questions/71826604/webpack-giving-an-error-when-hot-reloading-my-react-app) `Craco`ë¡œ í•´ê²°í–ˆë˜ ê²½í—˜ë„ ìˆì—ˆë‹¤.

ì•„ì§ì€ `CRA`ì˜ ê¸°ë³¸ ì„¸íŒ…ì„ ì œì™¸í•˜ë©´ `Webpack`ì˜ ì˜ì¡´ì„±ì´ ê±°ì˜ ì—†ì—ˆì§€ë§Œ, í”„ë¡œì íŠ¸ê°€ í™•ì¥ë˜ë©´ì„œ ë¹„ìŠ·í•œ ë¬¸ì œë¥¼ ë§ˆì£¼ì¹  ê°€ëŠ¥ì„±ì´ í¬ë‹¤ê³  íŒë‹¨í–ˆë‹¤.

ë˜í•œ ì‘ì„±ì¼ ê¸°ì¤€ìœ¼ë¡œ `react-scripts` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì¼ì€ 22ë…„ 4ì›”ë¡œ 1ë…„ì´ ë„˜ê²Œ ì—…ë°ì´íŠ¸ê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šê³  ìˆë‹¤.

ë”°ë¼ì„œ `CRA` ê¸°ë°˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë³€í™”ê°€ ë¹ ë¥¸ í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœê³„ì— ëŒ€í•œ ëŒ€ì‘ì´ ì–´ë µë‹¤ê³  íŒë‹¨í–ˆë‹¤.

### 3. React íŒ€ì—ì„œ ë”ì´ìƒ ê¶Œì¥í•˜ì§€ ì•ŠëŠ” ë¶„ìœ„ê¸°

ìƒˆë¡œ ê°œí¸ëœ `React` ê³µì‹ ë¬¸ì„œì—ì„œ `CRA`ëŠ” ë”ì´ìƒ ì–¸ê¸‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  [React ê¸°ë°˜ì˜ ì—¬ëŸ¬ í”„ë ˆì„ì›Œí¬ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•  ê²ƒì„ ê¶Œì¥](https://react.dev/learn/start-a-new-react-project)í•˜ê³  ìˆë‹¤.

ë§Œì•½ í”„ë ˆì„ì›Œí¬ë¥¼ ê³ ë¥´ì§€ ëª»í–ˆë‹¤ë©´ `Vite`ë‚˜ `Parcel` ë“±ì˜ ë²ˆë“¤ëŸ¬ë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ `React` ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ë„ ì¢‹ë‹¤ê³  ì–¸ê¸‰í•˜ê³  ìˆë‹¤.

> If youâ€™re still not convinced, or your app has unusual constraints not served well by these frameworks and youâ€™d like to roll your own custom setup, we canâ€™t stop youâ€”go for it! Grab react and react-dom from npm, set up your custom build process with a bundler like Vite or Parcel, and add other tools as you need them for routing, static generation or server-side rendering, and more.
>
> [Can I use React without a framework?](https://react.dev/learn/start-a-new-react-project#can-i-use-react-without-a-framework)

í˜„ì¬ëŠ” ìƒˆë¡œìš´ í”„ë ˆì„ì›Œí¬ë¥¼ ë„ì…í•  ë§Œí•œ ì—¬ìœ ê°€ ì—†ì—ˆê¸°ì— `vite` ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìš°ì„ ì ìœ¼ë¡œ ì§„í–‰í•˜ê¸°ë¡œ í–ˆë‹¤.

## ë§ˆì´ê·¸ë ˆì´ì…˜ ê³¼ì •

### 1. Vite ì„¤ì¹˜

`yarn add -D vite @vitejs/plugin-react`

package.json ì˜ scripts ì—ì„œ ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ viteë¡œ ë³€ê²½í•´ì•¼ í•œë‹¤.

`craco start` ë¥¼ `vite`ë¡œ, `craco build`ë¥¼ `vite build` ë¡œ ë³€ê²½í•œë‹¤.

#### 1. vite.config.ts ìƒì„±

```ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
});
```

#### 2. vite.env.d.ts ìƒì„±

```ts
/// <reference types="vite/client" />
/// <referencetypes="vite-plugin-svgr/client" />
```

#### 3. tsconfig types ì¶”ê°€

```json
{
  compilerOptions: {
    ...,
     "types": ["vite/client"]
  }
}
```

#### 4. index.html ìˆ˜ì •

`index.html`ì€ public í´ë”ì—ì„œ ìµœìƒë‹¨ í´ë”ë¡œ ì´ë™í•´ì•¼ í•œë‹¤.

`index.html` ë‚´ì˜ `%PUBLIC_URL%`ì€ ëª¨ë‘ ì œê±°í•´ì•¼ í•œë‹¤.

root div ë°”ë¡œ ë°‘ì— `index.tsx`ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.

```html
<!-- index.html -->
...
<body>
  <div id="root"></div>
  <script type="module" src="/src/index.tsx"></script>
  ...
</body>
```

### 2. react-scripts ë° Craco ì œê±°

#### 1. react-scripts ë° Craco ì œê±°

`yarn remove react-scripts @craco/craco`

#### 2. craco.config.js ì œê±°

`craco.config.js` ë¥¼ ì œê±°í•œë‹¤.

### 3. ENV í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### 1. í™˜ê²½ ë³€ìˆ˜ í”„ë¦¬í”½ìŠ¤ ë³€ê²½

`CRA`ëŠ” `REACT_APP_` í”„ë¦¬í”½ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°˜ë©´, `Vite`ëŠ” `VITE_` í”„ë¦¬í”½ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.

ë˜í•œ í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ì‹œ `CRA`ëŠ” `process.env.` í”„ë¦¬í”½ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°˜ë©´, `Vite`ëŠ” `import.meta.env.` í”„ë¦¬í”½ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.

ì´ì— ë§ì¶° ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ì˜ í”„ë¦¬í”½ìŠ¤ë¥¼ ë³€ê²½í–ˆë‹¤.

#### 2. react-app-env.d.ts ì œê±°

`CRA`ì—ì„œ ì œê³µí•˜ëŠ” `react-app-env.d.ts`ë¥¼ ì œê±°í•˜ê³  `env.d.ts`ë¥¼ ìƒˆë¡œ ìƒì„±í–ˆë‹¤.

```ts
interface ImportMetaEnv {
  VITE_TEMP_ENV: string
  ...
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

### 4. vite.config.ts ì„¤ì • ì¶”ê°€

í”„ë¡œì íŠ¸ í™˜ê²½ì— ë§ê²Œ ëª‡ ê°€ì§€ ì„¤ì •ì„ ì¶”ê°€í–ˆë‹¤.

#### 1. localhostì—ì„œ https ì‚¬ìš© ì„¤ì •

`localhost` ì—ì„œ `https`ë¥¼ ì‚¬ìš©í•´ì•¼ í–ˆê¸°ì— [`basic-ssl` í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€](https://ko.vitejs.dev/config/server-options.html#server-https)í–ˆë‹¤.

`yarn add -D @vitejs/plugin-basic-ssl`

```ts
// vite.config.ts
import basicSsl from '@vitejs/plugin-basic-ssl';

...

export default defineConfig(() => {
  return {
    ...
    server: {
      https: true,
    },
    plugins: [react(), basicSsl()],
  };
});
```

#### 2. svgr ì„¤ì •

SVG ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ì„ ìœ„í•´ `svgr`ì„ ì¶”ê°€í–ˆë‹¤.

`yarn add -D vite-plugin-svgr`

```ts
// vite.config.ts
import basicSsl from '@vitejs/plugin-basic-ssl';
import svgr from 'vite-plugin-svgr'

...

export default defineConfig(() => {
  return {
    ...
    server: {
      https: true,
    },
    plugins: [
      react(),
      basicSsl(),
      svgr({
        svgrOptions: {
          icon: true,
        },
      })
    ],
  };
});
```

#### 3. tsconfigPaths ì„¤ì •

ì ˆëŒ€ê²½ë¡œ importë¥¼ ìœ„í•´ tsconfigì˜ pathsë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤.

`yarn add -D vite-tsconfig-paths`

```ts
// vite.config.ts
import basicSsl from '@vitejs/plugin-basic-ssl';
import svgr from 'vite-plugin-svgr'
import tsconfigPaths from 'vite-tsconfig-paths';

...

export default defineConfig(() => {
  return {
    ...
    server: {
      https: true,
    },
    plugins: [
      react(),
      basicSsl(),
      svgr({
        svgrOptions: {
          icon: true,
        },
      }),
      tsconfigPaths()
    ],
  };
});
```

### 5. CRA eslint ì„¤ì • ì œê±°

eslint extends í•­ëª© ì¤‘ `react-app` ì„ ì œê±°í•œë‹¤.

ì´ ë•Œ ì£¼ì˜í•  ì ì€ CRAì—ì„œ ì œê³µí•˜ëŠ” eslint ì„¤ì •ì´ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë¦°íŠ¸ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì´ë¥¼ ìœ„í•´ í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸, rules ë“±ì„ ì¶”ê°€ë¡œ ì„¤ì •í•´ì•¼í•  ìˆ˜ ìˆë‹¤.

### 6. í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¸íŒ…

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ `Vitest`ë¥¼ ë„ì…í–ˆë‹¤.

`yarn add -D vitest`

```json
// package.json

{
  ...
  "scripts": {
    ...
    "test": "vitest test"
  }
}
```

## ì¶”ê°€ ì„¤ì •

ê¸°ë³¸ì ì¸ ì„¤ì •ì€ ëë‚¬ì§€ë§Œ ëª‡ ê°€ì§€ ì„¤ì •ì„ ì¶”ê°€í–ˆë‹¤.

### 1. Storybook ì„¤ì •

Storybook ì—­ì‹œ vite ê¸°ë°˜ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í–ˆë‹¤.

ê°„ë‹¨í•œ ëª…ë ¹ì–´ë¡œ ê°€ëŠ¥í•˜ë‹¤.

`npx sb@next init --builder storybook-builder-vite`

### 2. ë¹Œë“œ ê´€ë ¨ ì¶”ê°€ ì„¤ì •

ë¹Œë“œ ì‹œ ë” ìì„¸í•œ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ì„¤ì •ì„ ì¶”ê°€í–ˆë‹¤.

#### 1. bundle-analyzer ì¶”ê°€

`yarn add -D rollup-plugin-visualizer`

bundle analyzerëŠ” ë¹Œë“œ ì‹œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° filename í•­ëª©ì—ì„œ ì €ì¥ ê²½ë¡œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```ts
import { visualizer } from 'rollup-plugin-visualizer';

export default defineConfig(() => {
  return {
    plugins: [
      ...,
      visualizer({
        template: 'treemap', // or sunburst
        open: true,
        gzipSize: true,
        brotliSize: true,
        filename: './bundle-analyze/analyze.html', // will be saved in project's root
      }) as PluginOption,
    ],
  };
});
```

#### 2. ë¹Œë“œ ì†Œìš” ì‹œê°„ ì¶œë ¥

ë¹Œë“œ ì‹œ ì†Œìš” ì‹œê°„ì„ ì•Œê¸° ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í–ˆë‹¤.

`yarn add -D vite-plugin-time-reporter`

```ts
import timeReporter from 'vite-plugin-time-reporter';

export default defineConfig(() => {
  return {
    plugins: [..., timeReporter()],
  };
});
```

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

`Vite`ë¥¼ ë„ì…í•œ í›„ ëª¨ë“ ê²Œ ìˆœíƒ„í•˜ì§€ë§Œì€ ì•Šì•˜ë‹¤.

### 1. Node.js ëŸ°íƒ€ì„ í™˜ê²½ ì „ìš© ëª¨ë“ˆì´ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì´ìŠˆ

Node.js ëŸ°íƒ€ì„ í™˜ê²½ ì „ìš© ëª¨ë“ˆì´ë€ `path`, `fs`, `events`, `http`, `https` ë“±ë“± ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ `Node.js` ëŸ°íƒ€ì„ í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ëŠ” ëª¨ë“ˆì´ë‹¤. ë”°ë¼ì„œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

ì´ëŸ¬í•œ í˜„ìƒì— ëŒ€í•´ì„œ ì´ë¯¸ ì—¬ëŸ¬ ê°œì˜ ì´ìŠˆê°€ ì˜¬ë¼ì™”ê³ , ê·¸ ì¤‘ í•˜ë‚˜ì—ì„œ [ì—ë°˜ ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‹µë³€](https://github.com/vitejs/vite/issues/1374)í–ˆë‹¤.

> This is a wont fix, because aws-amplify is legit trying to import and use Node-only builtins when it's actually intended to be a client library. Unlike webpack 4, Vite does not shim Node built-ins. Note this means aws-amplify will break in webpack 5 as well because it no longer shims Node built-ins. aws-amplify should stop relying on Node built-ins if it actually is meant to be used in the browser.

ì´ëŸ¬í•œ ë‹µë³€ì— ê¸°ë°˜í•´ë³´ë©´ ê¸°ì¡´ì˜ `CRA`ì—ì„œëŠ” ì •ìƒ ë™ì‘í–ˆë˜ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ì‚¬ë‚´ í”„ë¡œì íŠ¸ì˜ `CRA`ëŠ” `Webpack 4`ì— ì˜ì¡´í•˜ê³  ìˆì—ˆëŠ”ë° `Webpack 4` ê¹Œì§€ëŠ” `Node.js` ëŸ°íƒ€ì„ í™˜ê²½ ì „ìš© ëª¨ë“ˆì„ ë¸Œë¼ìš°ì €ì—ì„œë„ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í˜¸í™˜ì„± ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ `Webpack 5` ë¶€í„°ëŠ” ë” ì—„ê²©í•œ ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ë„ì…ë˜ì–´ ì´ëŸ¬í•œ ì²˜ë¦¬ê°€ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” `Vite`ë„ ë§ˆì°¬ê°€ì§€ì´ë¯€ë¡œ ì˜ˆê¸°ì¹˜ ëª»í•œ ì´ìŠˆê°€ ë°œìƒí–ˆì—ˆë‹¤.

ì´ ì´ìŠˆëŠ” `index.html`ê³¼ `vite.config.ts`ì— ë‹¤ìŒê³¼ ê°™ì€ ì„¤ì •ì„ ì¶”ê°€í•˜ì—¬ ëŒ€ì‘í–ˆë‹¤.

```html
<body>
  <div id="root"></div>
  <script>
    window.global = window;
  </script>
  <script type="module" src="/src/index.tsx"></script>
</body>
```

`Node.js`ì˜ ì „ì—­ ê°ì²´ ë° ëª¨ë“ˆ ê´€ë ¨ ê¸°ëŠ¥ì„ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í´ë¦¬í•„ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜ ë° ì ìš©í–ˆë‹¤. ë˜í•œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì „ì—­ ë³€ìˆ˜ `globalì„` `window`ë¡œ ì„¤ì •í–ˆë‹¤.

`./runtimeConfig'` ëª¨ë“ˆì€ Node.jsì˜ ë‚´ì¥ ëª¨ë“ˆì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ ë¸Œë¼ìš°ì € ëª¨ë“ˆì¸ `./runtimeConfig.browser`ë¡œ í•´ì„ë˜ë„ë¡ ìˆ˜ì •í–ˆë‹¤.

```ts
// ë‹¤ìŒì˜ 2ê°œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ê°€ í•„ìš”í•˜ë‹¤.
import { NodeGlobalsPolyfillPlugin } from '@esbuild-plugins/node-globals-polyfill';
import { NodeModulesPolyfillPlugin } from '@esbuild-plugins/node-modules-polyfill';

export default defineConfig({
  define: {
    ...(process.env.NODE_ENV === 'development' ? { global: 'window' } : {}),
  },
  optimizeDeps: {
    esbuildOptions: {
      define: {
        global: 'globalThis',
      },
      plugins: [
        NodeGlobalsPolyfillPlugin({
          process: true,
          buffer: true,
        }),
        NodeModulesPolyfillPlugin(),
      ],
    },
  },
  resolve: {
    alias: {
      './runtimeConfig': './runtimeConfig.browser',
    },
  },
});
```

### 2. ë‚®ì€ ë²„ì „ ë¸Œë¼ìš°ì € / ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì´ìŠˆ

ë‚®ì€ ë²„ì „ì˜ ë¸Œë¼ìš°ì € ë˜ëŠ” ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆë‹¤.

ì´ ì´ìŠˆëŠ” `Iphone 6+`, `IOS 12.5.7` í™˜ê²½ì—ì„œ ë°œìƒí–ˆë‹¤.

ì˜µì…”ë„ ì²´ì´ë‹ ë¬¸ë²•ì´ ì¸ì‹ë˜ì§€ ì•Šì•„ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë©ˆì¶˜ ê²ƒìœ¼ë¡œ íŒŒì•…í–ˆê³ , ìµœì‹  ë¬¸ë²•ì„ ì´í•´í•˜ì§€ ëª»í•˜ëŠ”ê±´ê°€ ì‹¶ì—ˆë‹¤.

ë”°ë¼ì„œ legacy í™˜ê²½ì—ì„œ `Vite` ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í˜¸í™˜ì„± ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ `@vitejs/plugin-legacy`ë¥¼ ì¶”ê°€í–ˆë‹¤. ì´ìŠˆ ìì²´ëŠ” êµ¬í˜• `IOS` ì—ì„œ ë°œìƒí–ˆì§€ë§Œ ë²”ìš©ì ì¸ ì ìš©ì„ ìœ„í•´ targetì„ `IE`ë¡œ ì¡ì•˜ë‹¤.

ì´ ì²˜ë¦¬ë¡œ ì¸í•´ ë¹Œë“œ ì†Œìš” ì‹œê°„ì´ ì•½ 1ë¶„ ì •ë„ ëŠ˜ì–´ë‚¬ë‹¤..ğŸ˜¢

```ts
import legacy from '@vitejs/plugin-legacy';

export default defineConfig(() => {
  return {
    ...
    plugins: [
      ...
      legacy({
        targets: ['defaults', 'not IE 11'],
      }),
    ],
  };
});
```

### 3. íƒ€ì… ì²´í¬ê°€ ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ

> ViteëŠ” .ts íŒŒì¼ì— ëŒ€í•´ì„œ íŠ¸ëœìŠ¤íŒŒì¼ë§ë§Œ ìˆ˜í–‰í•˜ë©°, íƒ€ì… ê²€ì‚¬ëŠ” IDEì™€ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ìˆ˜í–‰ëœë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
>
> [Vite íŠ¸ëœìŠ¤íŒŒì¼ë§Œ ìˆ˜í–‰](https://ko.vitejs.dev/guide/features.html#transpile-only)

viteëŠ” íƒ€ì… ì²´í¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤. íŠ¸ëœìŠ¤íŒŒì¼ë§ì€ Viteì˜ on demand HMR ì»¨ì…‰ê³¼ ì¼ì¹˜í•œë‹¤. ë³€ê²½ëœ ëª¨ë“ˆë§Œ ë‹¤ì‹œ íŠ¸ëœìŠ¤íŒŒì¼ë§í•˜ì—¬ êµì²´í•  ìˆ˜ ìˆë‹¤. ë°˜ë©´ íƒ€ì… ì²´í¬ëŠ” ëª¨ë“  ëª¨ë“ˆì— ëŒ€í•´ ìˆ˜í–‰ë˜ì–´ì•¼ í•œë‹¤. ë³€ê²½ëœ ëª¨ë“ˆì—ë§Œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ëŠ” ë³´ì¥ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ íƒ€ì… ì²´í¬ë¥¼ ë§¤ë²ˆ í•œë‹¤ë©´ ViteëŠ” ë¹ ë¥¸ ì†ë„ë¥¼ ì œê³µí•  ìˆ˜ ì—†ê²Œ ëœë‹¤. ë”°ë¼ì„œ Vite íŒ€ì—ì„œëŠ” íƒ€ì… ì²´í¬ëŠ” ë³„ë„ë¡œ ìˆ˜í–‰í•  ê²ƒì„ ê¶Œì¥í•œë‹¤.

> Viteì˜ ì—­í• ì€ ì†ŒìŠ¤ ëª¨ë“ˆì„ ê°€ëŠ¥í•œ ë¹ ë¥´ê²Œ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ë¥¼ ìœ„í•´ Viteì˜ ë³€í™˜ íŒŒì´í”„ ë¼ì¸ì—ì„œ ì •ì  ë¶„ì„ ê²€ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
>
> [Vite íŠ¸ëœìŠ¤íŒŒì¼ë§Œ ìˆ˜í–‰](https://ko.vitejs.dev/guide/features.html#transpile-only)

ë”°ë¼ì„œ ë‹¤ìŒì˜ 2ê°€ì§€ ë°©ë²•ìœ¼ë¡œ íƒ€ì… ì²´í¬ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í–ˆë‹¤.

1. ë¹Œë“œ ëª…ë ¹ì–´ì— `tsc --noEmit`ì„ ì¶”ê°€í•˜ì—¬ ë¹Œë“œ ì‹œ íƒ€ì… ì²´í¬ê°€ ì´ë£¨ì–´ì§€ë„ë¡ í–ˆë‹¤.
2. [vite-plugin-checker](https://ko.vitejs.dev/guide/features.html#transpile-only:~:text=%EC%97%90%EB%9F%AC%EB%A5%BC%20%ED%99%95%EC%9D%B8%ED%95%98%EA%B3%A0%20%EC%8B%B6%EB%8B%A4%EB%A9%B4-,vite%2Dplugin%2Dchecker,-%EB%A5%BC%20%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%20%EA%B2%83%EC%9D%84) í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ íƒ€ì… ì—ëŸ¬ê°€ ë³´ì—¬ì§€ë„ë¡ í–ˆë‹¤.

ë‹¤ë§Œ ë¹Œë“œ ì‹œ `tsc --noEmit`ì´ ì¶”ê°€ë˜ë‹ˆê¹Œ ë¹Œë“œ ì‹œê°„ì´ ì†Œí­ ì¦ê°€í–ˆë‹¤.

## ê²°ê³¼ ë° í›„ê¸°

`Vite`ë¥¼ ë„ì…í•œì§€ ì•½ 2ì£¼ê°€ ì§€ë‚¬ê³  í˜„ì¬ëŠ” ëª¨ë‘ê°€ ë§Œì¡±í•˜ë©´ì„œ ì‚¬ìš©í•˜ê³  ìˆë‹¤. íŠ¹íˆ ë¹ ë¥¸ ê°œë°œ ì†ë„ê°€ ì£¼ëŠ” ë§Œì¡±ê°ì´ ë§¤ìš° í¬ë‹¤.

- ë¹Œë“œ ì‹œê°„ : ì•½ 3ë¶„ -> ì•½ 1ë¶„ 20ì´ˆ (ì•½ 55.56% ê°ì†Œ)
- ë¡œì»¬ í™˜ê²½ êµ¬ë™ ì‹œê°„ : 12ì´ˆ -> 0.3ì´ˆ (ì•½ 97.5% ê°ì†Œ)
- ë°°í¬ ì‹œê°„ : ì•½ 10ë¶„ -> ì•½ 8ë¶„ (ì•½ 20% ê°ì†Œ)

ë‹¤ë§Œ, `CRA`ì—ì„œ `Vite`ë¡œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ í”„ë¡œì íŠ¸ì— ë§¤ìš° í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì‘ì—…ì´ë‹¤. ë”°ë¼ì„œ ì² ì €í•œ ê²€ì¦ì´ ë™ë°˜ë˜ì–´ì•¼ í•œë‹¤. ë‚˜ëŠ” ì´ ì ì„ ê°„ê³¼í–ˆê³  ë³„ë„ì˜ QA ê²€ì¦ ìš”ì²­ì„ í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ ê²°ê³¼, ì •ê¸° ë°°í¬ê°€ ì½” ì•ì— ì™”ëŠ”ë°ë„ ì´ìŠˆê°€ ê³„ì† ë°œìƒí–ˆë‹¤. ìš°ë ¤ì˜ ëª©ì†Œë¦¬ê°€ ë‚˜ì˜¤ê¸° ì‹œì‘í–ˆê³  ê²°êµ­ ì •ê¸° ë°°í¬ë¥¼ í•˜ë£¨ ì•ë‘ê³  í”„ë¡œì íŠ¸ ì „ì²´ QA ê²€ì¦ì´ ì§„í–‰ë˜ì—ˆë‹¤.

ë”ì´ìƒì˜ ì´ìŠˆëŠ” ë°œê²¬ë˜ì§€ ì•Šì•„ì„œ ê°€ìŠ´ì„ ì“¸ì–´ë‚´ë ¸ì§€ë§Œ, **ì„œë¹„ìŠ¤ì— í° ë³€í™”ë¥¼ ì¼ìœ¼ì¼œë†“ê³  ê²€ì¦ ìš”ì²­ì¡°ì°¨ í•˜ì§€ ì•Šì€ ë‚´ ìì‹ ì„ í¬ê²Œ ë°˜ì„±í–ˆë‹¤.**
